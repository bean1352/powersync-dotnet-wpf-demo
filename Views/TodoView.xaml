<Page x:Class="PowersyncDotnetTodoList.Views.TodoView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:vm="clr-namespace:PowersyncDotnetTodoList.ViewModels"
      Title="To-Do Items">

    <Grid>
        <!-- Back Button at the top -->
        <Button Content="Back"
                Command="{Binding BackCommand}"
                Width="100"
                Height="30"
                VerticalAlignment="Top"
                HorizontalAlignment="Left"
                Margin="10"/>

        <TextBlock Text="{Binding ListName}"
                   FontWeight="Bold"
                   FontSize="18"
                   HorizontalAlignment="Center"
                   Margin="0,10,0,10"/>

        <!-- StackPanel moved down with margin instead of VerticalOffset -->
        <StackPanel Margin="10,50,10,10"> <!-- Adjusted top margin to create space -->
            <TextBox Text="{Binding NewTodoName, UpdateSourceTrigger=PropertyChanged}"
                     Width="300"
                     Height="30"/>
            <Button Content="Add"
                    Command="{Binding AddTodoCommand}"
                    CommandParameter="{Binding NewTodoName}"
                    Width="100"
                    Height="30"
                    Margin="0,5,0,10"/>
            
            <ListBox ItemsSource="{Binding Todos}"
                     SelectedItem="{Binding SelectedTodo, Mode=TwoWay}"
                     Width="500"
                     Height="300">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <CheckBox IsChecked="{Binding completed}"
                                      Command="{Binding DataContext.ToggleCompleteCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                                      CommandParameter="{Binding}"/>
                            <TextBlock Text="{Binding description}"
                                        Width="350"/>
                            <Button Content="Delete"
                                    Command="{Binding DataContext.DeleteTodoCommand, RelativeSource={RelativeSource AncestorType=Page}}"
                                    CommandParameter="{Binding}"
                                    Width="80"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>
    </Grid>
</Page>
